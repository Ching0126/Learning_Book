# 学习笔记

## C++11新特性

### 1. 智能指针

解决问题： 独占/共享所有权指针的释放、传输

#### unique_ptr（独占指针）

- 在任何给定时刻，只能有一个指针管理内存
- 指针超出作用域，内存自动释放
- 不可copy,只可以move
  - 在做函数参数或是返回值中一定要注意所有权
  - **move调用结束之后，原指针销毁，所有权交给新指针。**

**三种创建方式：**

- 通过已有裸指针创建

  ```c++
  //裸指针改变，独占指针值会随之变化，相当于浅拷贝。 
   Cat *c_p2 = new Cat("yz");
      unique_ptr<Cat> u_c_p2{c_p2};
  ```

- new创建

  ```c++
   unique_ptr<Cat> u_c_p3{new Cat("dd")};
  u_c_p3->cat_info();
  ```

- std::make_unique创建(官方推荐)

  ```c++
   unique_ptr<Cat> u_c_p4 = make_unique<Cat>();
      u_c_p4->cat_info();
  ```

**通过get()获取地址**

```
 cout<<"cat adress"<<u_c_p3.get()<<endl;
```

**实现了->与***

```c++
unique_ptr<int> u_i_p3{new int(100)};   
u_c_p4->set_name("123");
cout<<*u_i_p3<<endl;
```

#### share_ptr（计数指针/共享指针）

- 与unique_ptr不同，其可共享
- 每copy一次，count+1；destory一次，count-1;
- 销毁只销毁一次，所有指针都为0，才会销毁。

#### 区别和联系

- shared_ptr不可转化为unique_ptr;

- unique_ptr可以转化为shared_ptr;(move())

  ```c++
   unique_ptr<Cat> cp1 = make_unique<Cat>("dd");
  shared_ptr<Cat> cp2 = move(cp1);
  shared_ptr cp3 = get_unique_ptr();//返回值为unique，自动转化。
  ```

- 返回值尽量返回unique_ptr;

#### weak_ptr(弱引用)

不可以调用->和*

解决循环依赖问题

weak_ptr可以通过lock()提升为shared_ptr；

```c++
shared_ptr<Cat> cp2 = wc1.lock();
```

weak_ptr可以调用shared_ptr,但不会导致shared_ptr+1；

```c++
shared_ptr<Cat> cp1 = make_shared<Cat>("c1");
    weak_ptr<Cat> wc1(cp1);
    cout<<cp1.use_count()<<endl;
    cout<<wc1.use_count()<<endl;
```

### 2. nullptr

在二叉树查询时，

​	如果不将结点设置为nullptr，在进行遍历时，系统无法找到该结点的位置；

​	若将结点设置为nullptr，则系统可以找到该结点，知识该结点为空。

NULL为一个宏定义  define null 0

nullptr相当于一个C++关键字

### 3. 基于范围的for循环

```c++
for(range_declaration:range_expression) loop_statement
```

```c++
map<int,string> index_map{{1,"hello"},{2,"world"},{3,"hello"}};
int int_array[]={0,1,2,3,4,5};

int main() {
    for (const auto &e : index_map) {
        cout<<e.first<<" "<<e.second<<endl;
    }
   for (auto e:int_array) {
       cout<<e<<endl;
   }

    return 0;
}
```

![image-20260107173432203](C:/Users/qiyi/AppData/Roaming/Typora/typora-user-images/image-20260107173432203.png)

## Git基础

学习网站：learngitbranching.js.org

git commit 提交任务，只提交修改的部分。

git branch newImage 创建一个叫newImage的分支

git checkout name 切换到name分支

创建一个新的分支同时切换到新创建的分支的话，可以通过 `git checkout -b <your-branch-name>`

第二种合并分支的方法是 `git rebase`。Rebase 实际上就是取出一系列的提交记录，“复制”它们，然后在另外一个地方逐个的放下去。