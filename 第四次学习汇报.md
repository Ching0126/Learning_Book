# 第四次学习汇报

## 1. 考试复习

1. 工程伦理期末考试 12.24
2. 政治期末考试 12.29

## 2. 课程作业

<img src="C:\Users\qiyi\AppData\Roaming\Typora\typora-user-images\image-20251225170243922.png" alt="image-20251225170243922" style="zoom:67%;" />

### 核心功能

1. 绘图支持 ：直线、矩形、椭圆、随手画（铅笔）。
2. 样式控制 ：颜色选择、线条粗细、线条样式（实线/虚线）。
3. 文件操作 ：
   - 保存/读取 ：支持自定义 .pt 格式（序列化存储）。
   - 导出 ：支持导出为 JPG/PNG 图像。
   - XML导出 ：支持导出图形数据为 XML 格式。
4. 撤销/重做 ：无限制的 Undo/Redo 功能。
5. 背景设置 ：支持导入图片作为画布背景。
6. 高级演示功能 （在 "Patterns Demo" 菜单中）：
   - Builder : 一键加载预设的组合图形。
   - Adapter : 添加一个通过适配器接入的“旧版矩形”组件。
   - Decorator : 给最后绘制的图形添加红色边框装饰。
   - Composite : 添加一个组合图形（矩形+线），作为单一对象处理。

### 程序模式

- Singleton (单例模式) : AppContext 类。确保全局只有一个应用上下文（颜色、粗细、模型引用）。
- Observer (观察者模式) : DrawingModel (Subject) 和 CanvasPanel (Observer)。当模型数据变化时，自动通知画布重绘。
- Bridge (桥接模式) : Shape (抽象部分) 持有 StrokeStyle (实现部分) 的引用。允许形状和线条样式（实线/虚线）独立变化。
- Prototype (原型模式) : Shape 实现了 Cloneable ，支持深/浅克隆（代码中预留了 clone 方法）。
- Command (命令模式) : DrawCommand 封装了绘图操作，配合 CommandHistory 实现撤销/重做。
- State (状态模式) : Tool 接口及其子类 ( LineTool , RectTool 等) 代表了编辑器处于不同的“工具状态”，处理不同的鼠标事件。
- Template Method (模板方法模式) :
- AbstractTool 定义了鼠标按下、拖拽、释放的通用流程，具体图形创建逻辑留给子类。
- Shape.draw() 定义了设置颜色、样式的通用流程， drawShape() 留给子类实现具体绘制。
- Strategy (策略模式) : FileStrategy 接口定义了保存文件的策略，有 NativeSaveStrategy (序列化) 和 ImageExportStrategy (图片导出) 两种实现。
- Factory Method (工厂方法模式) : ShapeFactory (简单工厂变体) 用于根据类型创建具体的图形对象。
- Iterator (迭代器模式) : DrawingModel 暴露了 Iterator<Shape> ，画布使用它来遍历绘制图形。
- Composite (组合模式) : CompositeShape 类允许将多个图形组合成一个图形对象进行处理。
- Decorator (装饰模式) : ShapeDecorator 和 RedBorderDecorator 可以在运行时动态地给图形添加边框。
- Visitor (访问者模式) : ShapeVisitor 接口和 XmlExportVisitor 类，用于在不修改图形类的情况下，实现将图形导出为 XML 的功能。
- Adapter (适配器模式) : LegacyRectangleAdapter 将一个假设的第三方/旧版 LegacyRectangle 类适配到我们的 Shape 接口上。
- Builder (建造者模式) : DrawingBuilder 用于分步构建复杂的图形场景（演示中用于加载 Demo 图形）。